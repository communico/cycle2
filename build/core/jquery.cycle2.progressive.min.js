/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20250917 */
/*! progressive loader plugin for Cycle2;  version: 20130315 */
!function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:!1}),e(document).on("cycle-pre-initialize",function(i,n){if(n.progressive){var r,l,c=n.API,s=c.next,t=c.prev,a=c.prepareTx,d=e.type(n.progressive);if("array"==d)r=n.progressive;else if(e.isFunction(n.progressive))r=n.progressive(n);else if("string"==d){if(l=e(n.progressive),!(r=e.trim(l.html())))return;if(/^(\[)/.test(r))try{r=e.parseJSON(r)}catch(e){return void c.log("error parsing progressive slides",e)}else(r=r.split(new RegExp(l.data("cycle-split")||"\n")))[r.length-1]||r.pop()}a&&(c.prepareTx=function(e,i){var l,c;e||0===r.length?a.apply(n.API,[e,i]):i&&n.currSlide==n.slideCount-1?(c=r[0],r=r.slice(1),n.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.API.advanceSlide(1)},50)}),n.API.add(c)):i||0!==n.currSlide?a.apply(n.API,[e,i]):(l=r.length-1,c=r[l],r=r.slice(0,l),n.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.currSlide=1,i.API.advanceSlide(-1)},50)}),n.API.add(c,!0))}),s&&(c.next=function(){var e=this.opts();if(r.length&&e.currSlide==e.slideCount-1){var i=r[0];r=r.slice(1),e.container.one("cycle-slide-added",function(e,i){s.apply(i.API),i.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(i)}else s.apply(e.API)}),t&&(c.prev=function(){var e=this.opts();if(r.length&&0===e.currSlide){var i=r.length-1,n=r[i];r=r.slice(0,i),e.container.one("cycle-slide-added",function(e,i){i.currSlide=1,i.API.advanceSlide(-1),i.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(n,!0)}else t.apply(e.API)})}})}(jQuery);